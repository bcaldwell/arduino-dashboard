{"version":3,"sources":["../src/index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["'use strict';\n\nvar arduino = require(\"johnny-five\");\nvar http = require('http');\nvar fs = require('fs');\nvar path = require('path');\nvar mime = require('mime');\nvar arduinoServer = require(path.resolve(__dirname + '/arduino/arduino_server'));\nvar cache = {};\nvar pins = {};\n\nvar withArduino = true;\n\n//note: socket.broadcast.emit();\n\n// function that handles no page at address\nfunction send404(response) {\n  response.writeHead(404, {\n    'Content-Type': 'text/plain'\n  });\n  response.write('Error 404: resource not found');\n  response.end();\n}\n\n//function that sends file\nfunction sendFile(response, filePath, fileContents) {\n  response.writeHead(\n    200, {\n      \"Content-Type\": mime.lookup(path.basename(filePath))\n    }\n  );\n  response.end(fileContents);\n}\n\n//function that serves files to server\nfunction serveStatic(response, cache, absPath) {\n  if (cache[absPath]) {\n    sendFile(response, absPath, cache[absPath]);\n  } else {\n    fs.exists(absPath, function(exists) {\n      if (exists) {\n        fs.readFile(absPath, function(err, data) {\n          if (err) {\n            send404(response);\n          } else {\n            cache[absPath] = data;\n            sendFile(response, absPath, data);\n          }\n        });\n      } else {\n        send404(response);\n      }\n    });\n  }\n}\n\nvar server = http.createServer(function(request, response) {\n  var absPath = './';\n  if (request.url == '/') {\n    absPath += 'public/index.html';\n  } else {\n    absPath += 'public' + request.url;\n  }\n\n  serveStatic(response, cache, absPath);\n\n});\n\nif (withArduino) {\n  arduino.Board({repl:false}).on(\"ready\", function() {\n    arduinoServer.listen(server, arduino, pins);\n    server.listen(8888, function() {\n      console.log(\"Server listening on port 8888.\");\n    });\n  });\n} else {\n  server.listen(8888, function() {\n    console.log(\"Server listening on port 8888. Note, arduino is NOT connected\");\n  });\n}\n"]}